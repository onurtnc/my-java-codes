import java.util.Scanner;
import java.util.ArrayList;

class Ogrenci {
    private String ad;
    private String soyad;
    private String numara;
    private ArrayList<Ders> dersler;
    
    public Ogrenci(String ad, String soyad, String numara) {
        this.ad = ad;
        this.soyad = soyad;
        this.numara = numara;
        this.dersler = new ArrayList<>();
    }
    
    public void dersEkle(Ders ders) {
        dersler.add(ders);
    }
    
    public double ortalamaHesapla() {
        if (dersler.isEmpty()) return 0;
        double toplam = 0;
        for (Ders ders : dersler) {
            toplam += ders.getOrtalama();
        }
        return toplam / dersler.size();
    }
    
    public String getAd() { return ad; }
    public String getSoyad() { return soyad; }
    public String getNumara() { return numara; }
    public ArrayList<Ders> getDersler() { return dersler; }
    public String getAdSoyad() { return ad + " " + soyad; }
}

class Ders {
    private String dersAdi;
    private double vize;
    private double final_notu;
    private double odev;
    
    public Ders(String dersAdi, double vize, double final_notu, double odev) {
        this.dersAdi = dersAdi;
        this.vize = vize;
        this.final_notu = final_notu;
        this.odev = odev;
    }
    
    public double getOrtalama() {
        return (vize * 0.3) + (final_notu * 0.5) + (odev * 0.2);
    }
    
    public String getHarfNotu() {
        double ort = getOrtalama();
        if (ort >= 90) return "AA";
        else if (ort >= 85) return "BA";
        else if (ort >= 80) return "BB";
        else if (ort >= 75) return "CB";
        else if (ort >= 70) return "CC";
        else if (ort >= 65) return "DC";
        else if (ort >= 60) return "DD";
        else if (ort >= 50) return "FD";
        else return "FF";
    }
    
    public String getDurum() {
        return getOrtalama() >= 60 ? "GEÃ‡TÄ°" : "KALDI";
    }
    
    public String getDersAdi() { return dersAdi; }
    public double getVize() { return vize; }
    public double getFinalNotu() { return final_notu; }
    public double getOdev() { return odev; }
}

public class OgrenciNotSistemi {
    private static ArrayList<Ogrenci> ogrenciler = new ArrayList<>();
    private static Scanner scanner = new Scanner(System.in);
    
    public static void main(String[] args) {
        // Demo veriler ekle
        demoVerilerEkle();
        
        System.out.println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘   Ã–ÄRENCÄ° NOT YÃ–NETÄ°M SÄ°STEMÄ°NE HOÅ GELDÄ°NÄ°Z   â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        boolean devam = true;
        while (devam) {
            devam = anaMenu();
        }
        
        System.out.println("\nğŸ‘‹ Programdan Ã§Ä±kÄ±lÄ±yor. Ä°yi gÃ¼nler!");
        scanner.close();
    }
    
    private static void demoVerilerEkle() {
        Ogrenci ogr1 = new Ogrenci("Ahmet", "YÄ±lmaz", "2021001");
        ogr1.dersEkle(new Ders("Matematik", 75, 80, 90));
        ogr1.dersEkle(new Ders("Fizik", 70, 75, 85));
        ogr1.dersEkle(new Ders("Kimya", 65, 70, 80));
        ogrenciler.add(ogr1);
        
        Ogrenci ogr2 = new Ogrenci("AyÅŸe", "Demir", "2021002");
        ogr2.dersEkle(new Ders("Matematik", 90, 95, 100));
        ogr2.dersEkle(new Ders("Fizik", 85, 90, 95));
        ogrenciler.add(ogr2);
    }
    
    private static boolean anaMenu() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘              ANA MENÃœ                     â•‘");
        System.out.println("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£");
        System.out.println("â•‘  1. ğŸ‘¤ Yeni Ã–ÄŸrenci Ekle                  â•‘");
        System.out.println("â•‘  2. ğŸ“ Ã–ÄŸrenciye Ders Notu Ekle           â•‘");
        System.out.println("â•‘  3. ğŸ“Š Ã–ÄŸrenci Listesi                    â•‘");
        System.out.println("â•‘  4. ğŸ“‹ Ã–ÄŸrenci DetaylÄ± Rapor              â•‘");
        System.out.println("â•‘  5. ğŸ† SÄ±nÄ±f Genel Durumu                 â•‘");
        System.out.println("â•‘  6. ğŸ” Ã–ÄŸrenci Ara                        â•‘");
        System.out.println("â•‘  7. ğŸ“ˆ En BaÅŸarÄ±lÄ± Ã–ÄŸrenciler             â•‘");
        System.out.println("â•‘  8. ğŸšª Ã‡Ä±kÄ±ÅŸ                              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.print("\nSeÃ§iminiz (1-8): ");
        
        int secim = 0;
        try {
            secim = scanner.nextInt();
            scanner.nextLine();
        } catch (Exception e) {
            scanner.nextLine();
            System.out.println("âŒ GeÃ§ersiz giriÅŸ!");
            return true;
        }
        
        switch (secim) {
            case 1: yeniOgrenciEkle(); break;
            case 2: dersNotuEkle(); break;
            case 3: ogrenciListesi(); break;
            case 4: ogrenciDetayliRapor(); break;
            case 5: sinifGenelDurum(); break;
            case 6: ogrenciAra(); break;
            case 7: enBasariliOgrenciler(); break;
            case 8: return false;
            default: System.out.println("âŒ GeÃ§ersiz seÃ§im!");
        }
        
        return true;
    }
    
    private static void yeniOgrenciEkle() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘         YENÄ° Ã–ÄRENCÄ° EKLEME               â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("ğŸ‘¤ Ã–ÄŸrenci AdÄ±: ");
        String ad = scanner.nextLine();
        
        System.out.print("ğŸ‘¤ Ã–ÄŸrenci SoyadÄ±: ");
        String soyad = scanner.nextLine();
        
        System.out.print("ğŸ”¢ Ã–ÄŸrenci NumarasÄ±: ");
        String numara = scanner.nextLine();
        
        // Numara kontrolÃ¼
        for (Ogrenci ogr : ogrenciler) {
            if (ogr.getNumara().equals(numara)) {
                System.out.println("âŒ Bu numarada bir Ã¶ÄŸrenci zaten kayÄ±tlÄ±!");
                return;
            }
        }
        
        Ogrenci yeniOgrenci = new Ogrenci(ad, soyad, numara);
        ogrenciler.add(yeniOgrenci);
        System.out.println("âœ… Ã–ÄŸrenci baÅŸarÄ±yla eklendi!");
        System.out.println("ğŸ“Œ " + ad + " " + soyad + " - " + numara);
    }
    
    private static void dersNotuEkle() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘         DERS NOTU EKLEME                  â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (ogrenciler.isEmpty()) {
            System.out.println("âŒ Sistemde kayÄ±tlÄ± Ã¶ÄŸrenci bulunmamaktadÄ±r!");
            return;
        }
        
        System.out.print("ğŸ”¢ Ã–ÄŸrenci NumarasÄ±: ");
        String numara = scanner.nextLine();
        
        Ogrenci ogrenci = ogrenciBul(numara);
        if (ogrenci == null) {
            System.out.println("âŒ Ã–ÄŸrenci bulunamadÄ±!");
            return;
        }
        
        System.out.println("ğŸ‘¤ Ã–ÄŸrenci: " + ogrenci.getAdSoyad());
        System.out.print("\nğŸ“š Ders AdÄ±: ");
        String dersAdi = scanner.nextLine();
        
        try {
            System.out.print("ğŸ“ Vize Notu (0-100): ");
            double vize = scanner.nextDouble();
            
            System.out.print("ğŸ“ Final Notu (0-100): ");
            double finalNotu = scanner.nextDouble();
            
            System.out.print("ğŸ“ Ã–dev Notu (0-100): ");
            double odev = scanner.nextDouble();
            scanner.nextLine();
            
            if (vize < 0 || vize > 100 || finalNotu < 0 || finalNotu > 100 || odev < 0 || odev > 100) {
                System.out.println("âŒ Notlar 0-100 arasÄ±nda olmalÄ±dÄ±r!");
                return;
            }
            
            Ders yeniDers = new Ders(dersAdi, vize, finalNotu, odev);
            ogrenci.dersEkle(yeniDers);
            
            System.out.println("\nâœ… Ders notu baÅŸarÄ±yla eklendi!");
            System.out.printf("ğŸ“Š Ortalama: %.2f\n", yeniDers.getOrtalama());
            System.out.println("ğŸ“ Harf Notu: " + yeniDers.getHarfNotu());
            System.out.println("âœ”ï¸ Durum: " + yeniDers.getDurum());
            
        } catch (Exception e) {
            scanner.nextLine();
            System.out.println("âŒ GeÃ§ersiz not giriÅŸi!");
        }
    }
    
    private static void ogrenciListesi() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘                    Ã–ÄRENCÄ° LÄ°STESÄ°                            â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (ogrenciler.isEmpty()) {
            System.out.println("âŒ Sistemde kayÄ±tlÄ± Ã¶ÄŸrenci bulunmamaktadÄ±r!");
            return;
        }
        
        System.out.println("\n" + "â”€".repeat(65));
        System.out.printf("%-15s %-20s %-15s %-10s\n", "NUMARA", "AD SOYAD", "DERS SAYISI", "ORTALAMA");
        System.out.println("â”€".repeat(65));
        
        for (Ogrenci ogr : ogrenciler) {
            System.out.printf("%-15s %-20s %-15d %.2f\n", 
                ogr.getNumara(), 
                ogr.getAdSoyad(), 
                ogr.getDersler().size(),
                ogr.ortalamaHesapla());
        }
        System.out.println("â”€".repeat(65));
        System.out.println("ğŸ“Œ Toplam Ã–ÄŸrenci SayÄ±sÄ±: " + ogrenciler.size());
    }
    
    private static void ogrenciDetayliRapor() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘      Ã–ÄRENCÄ° DETAYLI RAPOR                â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("ğŸ”¢ Ã–ÄŸrenci NumarasÄ±: ");
        String numara = scanner.nextLine();
        
        Ogrenci ogrenci = ogrenciBul(numara);
        if (ogrenci == null) {
            System.out.println("âŒ Ã–ÄŸrenci bulunamadÄ±!");
            return;
        }
        
        System.out.println("\n" + "â•".repeat(80));
        System.out.println("ğŸ‘¤ Ã–ÄŸrenci: " + ogrenci.getAdSoyad());
        System.out.println("ğŸ”¢ Numara: " + ogrenci.getNumara());
        System.out.println("â•".repeat(80));
        
        if (ogrenci.getDersler().isEmpty()) {
            System.out.println("âŒ Bu Ã¶ÄŸrencinin henÃ¼z ders notu bulunmamaktadÄ±r!");
            return;
        }
        
        System.out.println("\nğŸ“š DERS NOTLARI:");
        System.out.println("â”€".repeat(80));
        System.out.printf("%-20s %-8s %-8s %-8s %-10s %-8s %-10s\n", 
            "DERS ADI", "VÄ°ZE", "FÄ°NAL", "Ã–DEV", "ORTALAMA", "HARF", "DURUM");
        System.out.println("â”€".repeat(80));
        
        for (Ders ders : ogrenci.getDersler()) {
            System.out.printf("%-20s %-8.0f %-8.0f %-8.0f %-10.2f %-8s %-10s\n",
                ders.getDersAdi(),
                ders.getVize(),
                ders.getFinalNotu(),
                ders.getOdev(),
                ders.getOrtalama(),
                ders.getHarfNotu(),
                ders.getDurum());
        }
        
        System.out.println("â”€".repeat(80));
        System.out.printf("ğŸ¯ GENEL ORTALAMA: %.2f\n", ogrenci.ortalamaHesapla());
        System.out.println("â•".repeat(80));
    }
    
    private static void sinifGenelDurum() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘        SINIF GENEL DURUMU                 â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (ogrenciler.isEmpty()) {
            System.out.println("âŒ Sistemde kayÄ±tlÄ± Ã¶ÄŸrenci bulunmamaktadÄ±r!");
            return;
        }
        
        double toplamOrtalama = 0;
        int gecenSayisi = 0;
        int kalanSayisi = 0;
        double enYuksek = 0;
        double enDusuk = 100;
        
        for (Ogrenci ogr : ogrenciler) {
            if (ogr.getDersler().isEmpty()) continue;
            
            double ort = ogr.ortalamaHesapla();
            toplamOrtalama += ort;
            
            if (ort >= 60) gecenSayisi++;
            else kalanSayisi++;
            
            if (ort > enYuksek) enYuksek = ort;
            if (ort < enDusuk) enDusuk = ort;
        }
        
        double sinifOrtalamasi = toplamOrtalama / ogrenciler.size();
        
        System.out.println("\nğŸ“Š Ä°STATÄ°STÄ°KLER:");
        System.out.println("â”€".repeat(40));
        System.out.println("ğŸ‘¥ Toplam Ã–ÄŸrenci: " + ogrenciler.size());
        System.out.println("âœ… GeÃ§en Ã–ÄŸrenci: " + gecenSayisi);
        System.out.println("âŒ Kalan Ã–ÄŸrenci: " + kalanSayisi);
        System.out.printf("ğŸ“ˆ SÄ±nÄ±f OrtalamasÄ±: %.2f\n", sinifOrtalamasi);
        System.out.printf("ğŸ† En YÃ¼ksek Ortalama: %.2f\n", enYuksek);
        System.out.printf("ğŸ“‰ En DÃ¼ÅŸÃ¼k Ortalama: %.2f\n", enDusuk);
        System.out.println("â”€".repeat(40));
    }
    
    private static void ogrenciAra() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘           Ã–ÄRENCÄ° ARAMA                   â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("ğŸ” Ã–ÄŸrenci adÄ± veya soyadÄ± girin: ");
        String arama = scanner.nextLine().toLowerCase();
        
        boolean bulundu = false;
        System.out.println("\nğŸ“‹ ARAMA SONUÃ‡LARI:");
        System.out.println("â”€".repeat(60));
        
        for (Ogrenci ogr : ogrenciler) {
            if (ogr.getAd().toLowerCase().contains(arama) || 
                ogr.getSoyad().toLowerCase().contains(arama)) {
                System.out.printf("ğŸ‘¤ %s - %s (Ortalama: %.2f)\n", 
                    ogr.getAdSoyad(), ogr.getNumara(), ogr.ortalamaHesapla());
                bulundu = true;
            }
        }
        
        if (!bulundu) {
            System.out.println("âŒ EÅŸleÅŸen Ã¶ÄŸrenci bulunamadÄ±!");
        }
        System.out.println("â”€".repeat(60));
    }
    
    private static void enBasariliOgrenciler() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘      EN BAÅARILI Ã–ÄRENCÄ°LER               â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (ogrenciler.isEmpty()) {
            System.out.println("âŒ Sistemde kayÄ±tlÄ± Ã¶ÄŸrenci bulunmamaktadÄ±r!");
            return;
        }
        
        // Ã–ÄŸrencileri ortalamaya gÃ¶re sÄ±rala
        ArrayList<Ogrenci> siraliListe = new ArrayList<>(ogrenciler);
        siraliListe.sort((o1, o2) -> Double.compare(o2.ortalamaHesapla(), o1.ortalamaHesapla()));
        
        System.out.println("\nğŸ† TOP 5 Ã–ÄRENCÄ°:");
        System.out.println("â”€".repeat(60));
        
        int sayac = 0;
        for (Ogrenci ogr : siraliListe) {
            if (ogr.getDersler().isEmpty()) continue;
            
            sayac++;
            String madalya = "";
            if (sayac == 1) madalya = "ğŸ¥‡";
            else if (sayac == 2) madalya = "ğŸ¥ˆ";
            else if (sayac == 3) madalya = "ğŸ¥‰";
            else madalya = "  ";
            
            System.out.printf("%s %d. %-25s %.2f\n", 
                madalya, sayac, ogr.getAdSoyad(), ogr.ortalamaHesapla());
            
            if (sayac >= 5) break;
        }
        System.out.println("â”€".repeat(60));
    }
    
    private static Ogrenci ogrenciBul(String numara) {
        for (Ogrenci ogr : ogrenciler) {
            if (ogr.getNumara().equals(numara)) {
                return ogr;
            }
        }
        return null;
    }
}
