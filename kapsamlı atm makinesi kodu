import java.util.Scanner;
import java.util.ArrayList;
import java.text.SimpleDateFormat;
import java.util.Date;

public class ATMSimulator {
    // Hesap bilgileri
    private static String hesapSahibi = "onur tunÃ§";
    private static String kartNumarasi = "1234 5678 9012 3456";
    private static String sifre = "1234";
    private static double bakiye = 5000.0;
    private static ArrayList<String> islemGecmisi = new ArrayList<>();
    
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        
        // GiriÅŸ ekranÄ±
        System.out.println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘   ATM SÄ°MÃœLATÃ–RÃœNE HOÅ GELDÄ°NÄ°Z   â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        // Åifre kontrolÃ¼
        if (!sifreKontrol(scanner)) {
            System.out.println("\nâŒ 3 yanlÄ±ÅŸ deneme! KartÄ±nÄ±z bloke edildi.");
            scanner.close();
            return;
        }
        
        // Ana menÃ¼
        boolean devam = true;
        while (devam) {
            devam = anaMenu(scanner);
        }
        
        System.out.println("\nğŸ’³ KartÄ±nÄ±zÄ± almayÄ± unutmayÄ±n!");
        System.out.println("ğŸ‘‹ Ä°yi gÃ¼nler dileriz!");
        scanner.close();
    }
    
    // Åifre kontrolÃ¼ fonksiyonu
    private static boolean sifreKontrol(Scanner scanner) {
        int denemeSayisi = 3;
        
        while (denemeSayisi > 0) {
            System.out.print("\nğŸ” Åifrenizi girin: ");
            String girilenSifre = scanner.nextLine();
            
            if (girilenSifre.equals(sifre)) {
                System.out.println("âœ… GiriÅŸ baÅŸarÄ±lÄ±!");
                return true;
            } else {
                denemeSayisi--;
                if (denemeSayisi > 0) {
                    System.out.println("âŒ HatalÄ± ÅŸifre! Kalan deneme: " + denemeSayisi);
                }
            }
        }
        return false;
    }
    
    // Ana menÃ¼ fonksiyonu
    private static boolean anaMenu(Scanner scanner) {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘            ANA MENÃœ                â•‘");
        System.out.println("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£");
        System.out.println("â•‘  1. ğŸ’° Bakiye Sorgulama            â•‘");
        System.out.println("â•‘  2. ğŸ’µ Para YatÄ±rma                â•‘");
        System.out.println("â•‘  3. ğŸ’¸ Para Ã‡ekme                  â•‘");
        System.out.println("â•‘  4. ğŸ“‹ Ä°ÅŸlem GeÃ§miÅŸi               â•‘");
        System.out.println("â•‘  5. â„¹ï¸  Hesap Bilgileri             â•‘");
        System.out.println("â•‘  6. ğŸ”„ Åifre DeÄŸiÅŸtir              â•‘");
        System.out.println("â•‘  7. ğŸšª Ã‡Ä±kÄ±ÅŸ                       â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.print("\nSeÃ§iminiz (1-7): ");
        
        int secim = 0;
        try {
            secim = scanner.nextInt();
            scanner.nextLine(); // Buffer temizleme
        } catch (Exception e) {
            scanner.nextLine();
            System.out.println("âŒ GeÃ§ersiz giriÅŸ! LÃ¼tfen sayÄ± girin.");
            return true;
        }
        
        switch (secim) {
            case 1:
                bakiyeSorgula();
                break;
            case 2:
                paraYatir(scanner);
                break;
            case 3:
                paraCek(scanner);
                break;
            case 4:
                islemGecmisiGoster();
                break;
            case 5:
                hesapBilgileri();
                break;
            case 6:
                sifreDegistir(scanner);
                break;
            case 7:
                return false;
            default:
                System.out.println("âŒ GeÃ§ersiz seÃ§im! LÃ¼tfen 1-7 arasÄ± bir sayÄ± girin.");
        }
        
        return true;
    }
    
    // Bakiye sorgulama
    private static void bakiyeSorgula() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘        BAKÄ°YE SORGULAMA            â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.printf("ğŸ’° GÃ¼ncel Bakiyeniz: %.2f TL\n", bakiye);
        islemKaydet("Bakiye Sorgulama: " + String.format("%.2f TL", bakiye));
    }
    
    // Para yatÄ±rma
    private static void paraYatir(Scanner scanner) {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘          PARA YATIRMA              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.print("ğŸ’µ YatÄ±rmak istediÄŸiniz tutarÄ± girin: ");
        
        try {
            double tutar = scanner.nextDouble();
            scanner.nextLine();
            
            if (tutar <= 0) {
                System.out.println("âŒ GeÃ§ersiz tutar! Pozitif bir deÄŸer girin.");
                return;
            }
            
            if (tutar > 10000) {
                System.out.println("âŒ Tek seferde maksimum 10,000 TL yatÄ±rabilirsiniz!");
                return;
            }
            
            bakiye += tutar;
            System.out.printf("âœ… %.2f TL hesabÄ±nÄ±za yatÄ±rÄ±ldÄ±.\n", tutar);
            System.out.printf("ğŸ’° Yeni bakiyeniz: %.2f TL\n", bakiye);
            islemKaydet("Para YatÄ±rma: +" + String.format("%.2f TL", tutar));
            
        } catch (Exception e) {
            scanner.nextLine();
            System.out.println("âŒ GeÃ§ersiz tutar girdiniz!");
        }
    }
    
    // Para Ã§ekme
    private static void paraCek(Scanner scanner) {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘           PARA Ã‡EKME               â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.printf("ğŸ’° GÃ¼ncel Bakiyeniz: %.2f TL\n\n", bakiye);
        System.out.println("HÄ±zlÄ± SeÃ§im:");
        System.out.println("1. 100 TL    2. 200 TL    3. 500 TL");
        System.out.println("4. 1000 TL   5. DiÄŸer tutar");
        System.out.print("\nSeÃ§iminiz: ");
        
        double tutar = 0;
        
        try {
            int secim = scanner.nextInt();
            scanner.nextLine();
            
            switch (secim) {
                case 1: tutar = 100; break;
                case 2: tutar = 200; break;
                case 3: tutar = 500; break;
                case 4: tutar = 1000; break;
                case 5:
                    System.out.print("ğŸ’¸ Ã‡ekmek istediÄŸiniz tutarÄ± girin: ");
                    tutar = scanner.nextDouble();
                    scanner.nextLine();
                    break;
                default:
                    System.out.println("âŒ GeÃ§ersiz seÃ§im!");
                    return;
            }
            
            if (tutar <= 0) {
                System.out.println("âŒ GeÃ§ersiz tutar!");
                return;
            }
            
            if (tutar > bakiye) {
                System.out.println("âŒ Yetersiz bakiye!");
                System.out.printf("ğŸ’° Mevcut bakiyeniz: %.2f TL\n", bakiye);
                return;
            }
            
            if (tutar > 5000) {
                System.out.println("âŒ Tek seferde maksimum 5,000 TL Ã§ekebilirsiniz!");
                return;
            }
            
            if (tutar % 10 != 0) {
                System.out.println("âŒ Sadece 10 TL'nin katlarÄ± Ã§ekilebilir!");
                return;
            }
            
            bakiye -= tutar;
            System.out.printf("âœ… %.2f TL hesabÄ±nÄ±zdan Ã§ekildi.\n", tutar);
            System.out.printf("ğŸ’° Kalan bakiyeniz: %.2f TL\n", bakiye);
            System.out.println("ğŸ’µ LÃ¼tfen paranÄ±zÄ± almayÄ± unutmayÄ±n!");
            islemKaydet("Para Ã‡ekme: -" + String.format("%.2f TL", tutar));
            
        } catch (Exception e) {
            scanner.nextLine();
            System.out.println("âŒ GeÃ§ersiz giriÅŸ!");
        }
    }
    
    // Ä°ÅŸlem geÃ§miÅŸi
    private static void islemGecmisiGoster() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘         Ä°ÅLEM GEÃ‡MÄ°ÅÄ°              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (islemGecmisi.isEmpty()) {
            System.out.println("ğŸ“‹ HenÃ¼z iÅŸlem geÃ§miÅŸi bulunmamaktadÄ±r.");
        } else {
            for (int i = islemGecmisi.size() - 1; i >= 0; i--) {
                System.out.println((islemGecmisi.size() - i) + ". " + islemGecmisi.get(i));
            }
        }
    }
    
    // Hesap bilgileri
    private static void hesapBilgileri() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘        HESAP BÄ°LGÄ°LERÄ°             â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println("ğŸ‘¤ Hesap Sahibi: " + hesapSahibi);
        System.out.println("ğŸ’³ Kart NumarasÄ±: " + kartNumarasi);
        System.out.printf("ğŸ’° GÃ¼ncel Bakiye: %.2f TL\n", bakiye);
        System.out.println("ğŸ“… Hesap Tipi: Vadesiz Mevduat");
    }
    
    // Åifre deÄŸiÅŸtirme
    private static void sifreDegistir(Scanner scanner) {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘        ÅÄ°FRE DEÄÄ°ÅTÄ°RME            â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.print("ğŸ” Mevcut ÅŸifrenizi girin: ");
        String mevcutSifre = scanner.nextLine();
        
        if (!mevcutSifre.equals(sifre)) {
            System.out.println("âŒ HatalÄ± ÅŸifre!");
            return;
        }
        
        System.out.print("ğŸ”‘ Yeni ÅŸifrenizi girin (4 haneli): ");
        String yeniSifre = scanner.nextLine();
        
        if (yeniSifre.length() != 4 || !yeniSifre.matches("\\d+")) {
            System.out.println("âŒ Åifre 4 haneli rakamlardan oluÅŸmalÄ±dÄ±r!");
            return;
        }
        
        System.out.print("ğŸ”‘ Yeni ÅŸifrenizi tekrar girin: ");
        String yeniSifreTekrar = scanner.nextLine();
        
        if (!yeniSifre.equals(yeniSifreTekrar)) {
            System.out.println("âŒ Åifreler eÅŸleÅŸmiyor!");
            return;
        }
        
        sifre = yeniSifre;
        System.out.println("âœ… Åifreniz baÅŸarÄ±yla deÄŸiÅŸtirildi!");
        islemKaydet("Åifre DeÄŸiÅŸtirildi");
    }
    
    // Ä°ÅŸlem kaydetme
    private static void islemKaydet(String islem) {
        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        String tarih = sdf.format(new Date());
        islemGecmisi.add(tarih + " - " + islem);
    }
}
